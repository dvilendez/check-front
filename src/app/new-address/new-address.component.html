<div class="new-address">
  <h1>Nuevo Destinatario</h1>
  <div *ngIf="creationVisible" class="alert alert-{{creationState}} d-flex align-items-center" role="alert">
    <div>
      {{creationMsg}}
    </div>
  </div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>RUT</label>
      <input
        (keyup)="formatRut($event)"
        type="text"
        formControlName="rut"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['rut'].errors }"
      />
      <div *ngIf="submitted && f['rut'].errors" class="invalid-feedback">
        <div *ngIf="f['rut'].errors['required']">EL rut es requerido</div>
        <div *ngIf="f['rut'].errors['valid']">El rut es invalido</div>
      </div>
    </div>

    <div class="form-group">
      <label>Nombre</label>
      <input
        type="text"
        formControlName="name"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['name'].errors }"
      />
      <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
        <div *ngIf="f['name'].errors['required']">El nombre es requerido</div>
      </div>
    </div>

    <div class="form-group">
      <label>Correo</label>
      <input
        type="text"
        formControlName="email"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
      />
      <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
        <div *ngIf="f['email'].errors['required']">El correo es requerido</div>
        <div *ngIf="f['email'].errors['pattern']">El correo es invalido</div>
      </div>
    </div>

    <div class="form-group">
      <label>Telefono</label>
      <input
        type="text"
        formControlName="phone"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['phone'].errors }"
      />
      <div *ngIf="submitted && f['phone'].errors" class="invalid-feedback">
        <div *ngIf="f['phone'].errors['required']">El telefono es requerido</div>
      </div>
    </div>

    <div class="form-group">
      <label>Banco</label>
      <select
        class="form-select"
        aria-label=""
        formControlName="bank"
        [ngClass]="{ 'is-invalid': submitted && f['bank'].errors }"
      >
        <option *ngFor="let bank of banks" value="{{bank.name}}">{{bank.name}}</option>
      </select>
      <div
        *ngIf="submitted && f['bank'].errors"
        class="invalid-feedback"
      >
        <div *ngIf="f['bank'].errors['required']">
          El banco es requerido
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>Tipo de cuenta</label>
      <select
        class="form-select"
        aria-label=""
        formControlName="accountType"
        [ngClass]="{ 'is-invalid': submitted && f['accountType'].errors }"
      >
        <option>Cuenta corriente</option>
        <option>Cuenta vista</option>
        <option>Cuenta ahorro</option>
      </select>
      <div
        *ngIf="submitted && f['accountType'].errors"
        class="invalid-feedback"
      >
        <div *ngIf="f['accountType'].errors['required']">
          El tipo de cuenta es requerido
        </div>
      </div>
    </div>

    <div class="form-group">
      <label>N de cuenta</label>
      <input
        type="number"
        formControlName="accountNumber"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['accountNumber'].errors }"
      />
      <div
        *ngIf="submitted && f['accountNumber'].errors"
        class="invalid-feedback"
      >
        <div *ngIf="f['accountNumber'].errors['required']">
          El numero de cuenta es requerido
        </div>
      </div>
    </div>

    <div class="form-group action">
      <button type="submit" class="btn btn-success">Crear</button>
    </div>
  </form>

</div>
